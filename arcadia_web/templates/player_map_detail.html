{% extends "base.html" %}
{% block content %}
<h1>Mapa: {{ mapa.nome }}</h1>

<h2>Status dos Heróis</h2>
{% for g in mapa.campaign.guilds %}
  <h4>{{ g.nome }}</h4>
  <ul>
    {% for h in g.heroes %}
      {% set hs = h.maps|selectattr("map_id", "equalto", mapa.id)|first %}
      <li>
        <h4>{{ h.nome }}  
        — Tokens: {{ hs.death_tokens if hs else 0 }}
        {% if hs and hs.curse_nome %}
          — Curse: <strong>{{ hs.curse_nome }}</strong> ({{ hs.curse_efeito }})<h4/>
        {% endif %}
      </li>
    {% endfor %}
  </ul>
{% endfor %}
{% endblock %}
